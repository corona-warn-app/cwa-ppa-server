// This file is auto-generated, DO NOT make any changes here
syntax = "proto3";
package app.coronawarn.datadonation.common.protocols.internal.ppdd;
option java_multiple_files = true;

message PPADataIOS {

  // for Plausible Deniability; can be ignored by the server
  bytes requestPadding = 1;

  // 0..n entries expected
  repeated PPAExposureHistoryChange exposureHistoryChanges = 2;
  // 0..n entries expected
  repeated PPANewExposureWindow newExposureWindows = 3;
  // 0..1 entries expected
  repeated PPARegisteredTestMetadata registeredTestMetadataSet = 4;
  // 0..1 entries expected
  repeated PPAKeySubmissionMetadata keySubmissionMetadataSet = 5;

  PPAClientMetadataIOS clientMetadata = 6;
}

message PPADataAndroid {

  // for Plausible Deniability; can be ignored by the server
  bytes requestPadding = 1;

  // 0..n entries expected
  repeated PPAExposureHistoryChange exposureHistoryChanges = 2;
  // 0..n entries expected
  repeated PPANewExposureWindow newExposureWindows = 3;
  // 0..1 entries expected
  repeated PPARegisteredTestMetadata registeredTestMetadataSet = 4;
  // 0..1 entries expected
  repeated PPAKeySubmissionMetadata keySubmissionMetadataSet = 5;

  PPAClientMetadataAndroid clientMetadata = 6;
}

message PPAExposureHistoryChange {
  int64 timestamp = 1;
  PPARiskLevel riskLevel = 2;
}

message PPANewExposureWindow {
  PPAExposureWindow exposureWindow = 1;
  int32 transmissionRiskLevel = 2;
  double normalizedTime = 3;
}

message PPARegisteredTestMetadata {
  PPATestResult testResult = 1;
  int32 hoursSinceTestRegistration = 2;
  PPARiskLevel riskLevelAtTestRegistration = 3;
  int32 daysSinceMostRecentHighRiskAtTestRegistration = 4;
}

message PPAKeySubmissionMetadata {
  bool submitted = 1;
  bool submittedInBackground = 2;
  bool submittedAfterCancel = 3;
  bool submittedAfterSymptomFlow = 4;
  bool submittedWithAdvancedConsent = 5;
  PPALastSubmissionFlowScreen lastSubmissionFlowScreen = 6;
  int32 hoursSinceTestResult = 7;
  int32 hoursSinceTestRegistration = 8;
  int32 daysSinceMostRecentHighRiskAtTestRegistration = 9;
}

enum PPARiskLevel {
  RISK_LEVEL_UNKNOWN = 0;
  RISK_LEVEL_NONE = 1;
  RISK_LEVEL_LOW = 2;
  RISK_LEVEL_HIGH = 3;
}

message PPAExposureWindow {
  int64 timestamp = 1;
  PPAExposureWindowReportType reportType = 2;
  PPAExposureWindowInfectiousness infectiousness = 3;
  int32 callibrationConfidence = 4;
  repeated PPAExposureWindowScanInstance scanInstances = 5;
}

message PPAExposureWindowScanInstance {
  int32 typicalAttenuation = 1;
  int32 minAttenuation = 2;
  int32 secondsSinceLastScan = 3;
}

message PPAClientMetadataIOS {
  PPASemanticVersion cwaVersion = 1;
  PPASemanticVersion iosVersion = 2;
  string appConfigETag = 3;
  PPAFederalState federalState = 4;
}

message PPAClientMetadataAndroid {
  PPASemanticVersion cwaVersion = 1;
  int64 androidApiLevel = 2;
  int64 enfVersion = 3;
  string appConfigETag = 4;
  PPAFederalState federalState = 5;
}

message PPASemanticVersion {
  uint32 major = 1;
  uint32 minor = 2;
  uint32 patch = 3;
}

enum PPAExposureWindowReportType {
  REPORT_TYPE_UNKNOWN = 0;
  REPORT_TYPE_CONFIRMED_TEST = 1;
  REPORT_TYPE_CONFIRMED_CLINICAL_DIAGNOSIS = 2;
  REPORT_TYPE_SELF_REPORT = 3;
  REPORT_TYPE_RECURSIVE = 4;
  REPORT_TYPE_REVOKED = 5;
}

enum PPAExposureWindowInfectiousness {
  INFECTIOUSNESS_NONE = 0;
  INFECTIOUSNESS_STANDARD = 1;
  INFECTIOUSNESS_HIGH = 2;
}

enum PPATestResult {
  TEST_RESULT_UNKNOWN = 0;
  TEST_RESULT_PENDING = 1;
  TEST_RESULT_NEGATIVE = 2;
  TEST_RESULT_POSITIVE = 3;
}

enum PPALastSubmissionFlowScreen {
  UNKNOWN = 0;
  OTHER = 1;
  TEST_RESULT = 2;
  WARN_OTHERS = 3;
  SYMPTOMS = 4;
  SYMPTOM_ONSET = 5;
}

enum PPAFederalState {
  UNSPECIFIED_STATE = 0;
  BW = 1;
  BY = 2;
  BE = 3;
  BB = 4;
  HB = 5;
  HH = 6;
  HE = 7;
  MV = 8;
  NI = 9;
  NRW = 10;
  RP = 11;
  SL = 12;
  SN = 13;
  ST = 14;
  SH = 15;
  TH = 16;
}
